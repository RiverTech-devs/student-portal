<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Learning Portal</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 1200px;
            min-height: 600px;
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        .logout-btn {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
        }
        .nav-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            transition: all 0.3s ease;
        }
        .nav-tab.active {
            background: white;
            border-bottom: 3px solid #4facfe;
            color: #4facfe;
        }
        .content { padding: 30px; min-height: 400px; }
        .form-group { margin-bottom: 20px; text-align: left; }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 16px;
        }
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            margin: 5px;
        }
        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        .btn-secondary { background: #6c757d; color: white; }
        .hidden { display: none; }
        .alert {
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
        }
        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .config-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #dee2e6;
        }
        .game-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .game-card {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            color: white;
        }
        .game-card:hover { transform: translateY(-5px); }
        .stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
        }
        .stat { text-align: center; }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #4facfe;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
        }
        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéì Student Learning Portal</h1>
            <p id="welcome-message">Welcome to your learning dashboard</p>
            <button class="logout-btn hidden" id="logout-btn" onclick="portal.logout()">Logout</button>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('setup')" id="setup-tab">Setup</button>
            <button class="nav-tab" onclick="showTab('login')" id="login-tab" style="display:none;">Login</button>
            <button class="nav-tab" onclick="showTab('dashboard')" id="dashboard-tab" style="display:none;">Dashboard</button>
            <button class="nav-tab" onclick="showTab('games')" id="games-tab" style="display:none;">Games</button>
            <button class="nav-tab" onclick="showTab('progress')" id="progress-tab" style="display:none;">Progress</button>
            <button class="nav-tab" onclick="showTab('grades')" id="grades-tab" style="display:none;">Grades</button>
        </div>

        <div class="content">
            <!-- Setup Section -->
            <div id="setup-section">
                <div class="config-section">
                    <h3>üîß Supabase Configuration</h3>
                    <p>Enter your Supabase project details to connect to the backend:</p>
                    <div class="form-group">
                        <label for="supabase-url">Supabase Project URL</label>
                        <input type="url" id="supabase-url" placeholder="https://your-project-id.supabase.co">
                    </div>
                    <div class="form-group">
                        <label for="supabase-key">Supabase Anon Key</label>
                        <input type="password" id="supabase-key" placeholder="eyJ...">
                    </div>
                    <button class="btn btn-primary" onclick="portal.initializeSupabase()">Connect to Backend</button>
                    
                    <div class="alert alert-success" style="margin-top: 20px; background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb;">
                        <strong>First time setup:</strong><br>
                        1. Create a Supabase project at <a href="https://supabase.com" target="_blank">supabase.com</a><br>
                        2. Run the SQL schema from the setup guide<br>
                        3. Get your Project URL and anon key from Settings ‚Üí API<br>
                        4. Enter them above and click "Connect to Backend"
                    </div>
                </div>
            </div>

            <!-- Login Section -->
            <div id="login-section" class="hidden">
                <div class="auth-form">
                    <h2>Student Portal Login</h2>
                    <div id="auth-alerts"></div>
                    
                    <form id="login-form">
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" required>
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary" id="login-btn">Login</button>
                        <button type="button" class="btn btn-secondary" onclick="showRegisterForm()">Register New Account</button>
                    </form>

                    <form id="register-form" class="hidden">
                        <h3>Create New Account</h3>
                        <div class="form-group">
                            <label for="reg-email">Email Address</label>
                            <input type="email" id="reg-email" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-password">Password</label>
                            <input type="password" id="reg-password" required minlength="6">
                        </div>
                        <div class="form-group">
                            <label for="reg-username">Username</label>
                            <input type="text" id="reg-username" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-firstname">First Name</label>
                            <input type="text" id="reg-firstname" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-lastname">Last Name</label>
                            <input type="text" id="reg-lastname" required>
                        </div>
                        <div class="form-group">
                            <label for="reg-usertype">Account Type</label>
                            <select id="reg-usertype" required>
                                <option value="student">Student</option>
                                <option value="parent">Parent</option>
                                <option value="teacher">Teacher</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="reg-grade">Grade Level (for students)</label>
                            <select id="reg-grade">
                                <option value="">Select Grade</option>
                                <option value="K">Kindergarten</option>
                                <option value="1">1st Grade</option>
                                <option value="2">2nd Grade</option>
                                <option value="3">3rd Grade</option>
                                <option value="4">4th Grade</option>
                                <option value="5">5th Grade</option>
                                <option value="6">6th Grade</option>
                                <option value="7">7th Grade</option>
                                <option value="8">8th Grade</option>
                                <option value="9">9th Grade</option>
                                <option value="10">10th Grade</option>
                                <option value="11">11th Grade</option>
                                <option value="12">12th Grade</option>
                            </select>
                        </div>
                        <div class="form-group" id="child-email-group" style="display:none;">
                            <label for="child-email">Child's Email Address</label>
                            <input type="email" id="child-email" placeholder="Enter your child's registered email">
                            <small style="color: #666; font-size: 12px;">Enter the email address your child used to register their student account</small>
                        </div>
                        <button type="submit" class="btn btn-primary" id="register-btn">Register</button>
                        <button type="button" class="btn btn-secondary" onclick="showLoginForm()">Back to Login</button>
                    </form>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="dashboard-section" class="hidden">
                <h2>Welcome back, <span id="student-name">Student</span>!</h2>
                <div class="dashboard">
                    <div class="card">
                        <h3>üìä Quick Stats</h3>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value" id="games-played">0</div>
                                <div class="stat-label">Games Played</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="total-score">0</div>
                                <div class="stat-label">High Score</div>
                            </div>
                            <div class="stat">
                                <div class="stat-value" id="achievements">0</div>
                                <div class="stat-label">Achievements</div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üéØ Recent Activity</h3>
                        <div id="recent-activity">
                            <p>No recent activity</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üìà Learning Progress</h3>
                        <div>
                            <p>Math Skills</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 65%"></div>
                            </div>
                            <p>Reading Comprehension</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 78%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Games Section -->
            <div id="games-section" class="hidden">
                <h2>üéÆ Educational Games</h2>
                <div class="game-list">
                    <div class="game-card" onclick="playGame('math-adventure')">
                        <h3>üî¢ Math Adventure</h3>
                        <p>Practice arithmetic skills</p>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value">Level 1</div>
                                <div class="stat-label">Current Level</div>
                            </div>
                        </div>
                    </div>
                    <div class="game-card" onclick="playGame('word-wizard')">
                        <h3>üìö Word Wizard</h3>
                        <p>Spelling and vocabulary</p>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value">Level 1</div>
                                <div class="stat-label">Current Level</div>
                            </div>
                        </div>
                    </div>
                    <div class="game-card" onclick="playGame('science-lab')">
                        <h3>üß™ Science Lab</h3>
                        <p>Fun science experiments</p>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value">Level 1</div>
                                <div class="stat-label">Current Level</div>
                            </div>
                        </div>
                    </div>
                    <div class="game-card" onclick="playGame('history-quest')">
                        <h3>üèõÔ∏è History Quest</h3>
                        <p>Explore historical events</p>
                        <div class="stats">
                            <div class="stat">
                                <div class="stat-value">New!</div>
                                <div class="stat-label">Try it out</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="game-iframe-container" class="hidden" style="margin-top: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3 id="current-game-title"></h3>
                        <button class="btn btn-secondary" onclick="closeGame()">Close Game</button>
                    </div>
                    <iframe id="game-iframe" width="100%" height="500" frameborder="0"></iframe>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="progress-section" class="hidden">
                <h2>üìà Learning Progress</h2>
                <div class="dashboard">
                    <div class="card">
                        <h3>Subject Progress</h3>
                        <div id="subject-progress">
                            <p>Loading progress data...</p>
                        </div>
                    </div>
                    <div class="card">
                        <h3>üèÜ Achievements</h3>
                        <div id="achievements-list">
                            <p>No achievements yet. Keep playing!</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grades Section -->
            <div id="grades-section" class="hidden">
                <h2>üìä Grades & Assignments</h2>
                <div id="grades-content">
                    <p>No grades available yet</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        class StudentPortal {
            constructor() {
                this.supabase = null;
                this.currentUser = null;
                this.userProfile = null;
                this.init();
            }

            init() {
                const savedUrl = localStorage.getItem('supabase_url');
                const savedKey = localStorage.getItem('supabase_key');
                
                if (savedUrl && savedKey) {
                    document.getElementById('supabase-url').value = savedUrl;
                    document.getElementById('supabase-key').value = savedKey;
                    this.initializeSupabase();
                }

                document.getElementById('login-form').addEventListener('submit', (e) => this.handleLogin(e));
                document.getElementById('register-form').addEventListener('submit', (e) => this.handleRegister(e));

                // Handle account type changes for showing/hiding fields
                document.getElementById('reg-usertype').addEventListener('change', (e) => {
                    const userType = e.target.value;
                    const isStudent = userType === 'student';
                    const isParent = userType === 'parent';
                    
                    // Show/hide grade level for students
                    const gradeGroup = document.getElementById('grade-group');
                    if (gradeGroup) gradeGroup.style.display = isStudent ? 'block' : 'none';
                    
                    // Show/hide child email for parents
                    const childEmailGroup = document.getElementById('child-email-group');
                    if (childEmailGroup) childEmailGroup.style.display = isParent ? 'block' : 'none';
                    
                    // Set required fields
                    const gradeField = document.getElementById('reg-grade');
                    const childEmailField = document.getElementById('child-email');
                    
                    if (isStudent) {
                        if (gradeField) gradeField.required = true;
                        if (childEmailField) childEmailField.required = false;
                    } else if (isParent) {
                        if (gradeField) gradeField.required = false;
                        if (childEmailField) childEmailField.required = true;
                    } else {
                        if (gradeField) gradeField.required = false;
                        if (childEmailField) childEmailField.required = false;
                    }
                });
            }

            async initializeSupabase() {
                const url = document.getElementById('supabase-url').value;
                const key = document.getElementById('supabase-key').value;

                if (!url || !key) {
                    this.showAlert('Please enter both Supabase URL and API key', 'error');
                    return;
                }

                try {
                    localStorage.setItem('supabase_url', url);
                    localStorage.setItem('supabase_key', key);

                    this.supabase = supabase.createClient(url, key);

                    const { data, error } = await this.supabase.from('user_profiles').select('count').limit(1);
                    
                    if (error) throw error;

                    this.showAlert('Successfully connected to Supabase!', 'success');
                    
                    const { data: { session } } = await this.supabase.auth.getSession();
                    if (session) {
                        this.currentUser = session.user;
                        await this.loadUserProfile();
                        this.showDashboard();
                    } else {
                        this.showTab('login');
                    }

                    this.supabase.auth.onAuthStateChange(async (event, session) => {
                        if (event === 'SIGNED_IN' && session) {
                            this.currentUser = session.user;
                            await this.loadUserProfile();
                            this.showDashboard();
                        } else if (event === 'SIGNED_OUT') {
                            this.currentUser = null;
                            this.userProfile = null;
                            this.showTab('login');
                        }
                    });

                } catch (error) {
                    console.error('Supabase connection error:', error);
                    this.showAlert('Connection failed: ' + error.message, 'error');
                }
            }

            async handleLogin(e) {
                e.preventDefault();
                if (!this.supabase) {
                    this.showAlert('Please configure Supabase connection first', 'error');
                    return;
                }

                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const loginBtn = document.getElementById('login-btn');

                loginBtn.disabled = true;
                loginBtn.textContent = 'Logging in...';

                try {
                    const { data, error } = await this.supabase.auth.signInWithPassword({
                        email: email,
                        password: password
                    });

                    if (error) throw error;
                    this.showAlert('Login successful!', 'success');
                } catch (error) {
                    console.error('Login error:', error);
                    this.showAlert(error.message, 'error');
                } finally {
                    loginBtn.disabled = false;
                    loginBtn.textContent = 'Login';
                }
            }

            async handleRegister(e) {
                e.preventDefault();
                if (!this.supabase) {
                    this.showAlert('Please configure Supabase connection first', 'error');
                    return;
                }

                const email = document.getElementById('reg-email').value;
                const password = document.getElementById('reg-password').value;
                const username = document.getElementById('reg-username').value;
                const firstName = document.getElementById('reg-firstname').value;
                const lastName = document.getElementById('reg-lastname').value;
                const grade = document.getElementById('reg-grade').value;
                const userType = document.getElementById('reg-usertype').value;

                const registerBtn = document.getElementById('register-btn');
                registerBtn.disabled = true;
                registerBtn.textContent = 'Registering...';

                try {
                    const { data: authData, error: authError } = await this.supabase.auth.signUp({
                        email: email,
                        password: password
                    });

                    if (authError) throw authError;

                    // Create user profile
                    const { error: profileError } = await this.supabase
                        .from('user_profiles')
                        .insert({
                            id: authData.user.id,
                            username: username,
                            first_name: firstName,
                            last_name: lastName,
                            user_type: userType,
                            grade_level: userType === 'student' ? grade : null
                        });
                    
                    if (profileError) throw profileError;
                    
                    // If parent account, link to child
                    if (userType === 'parent') {
                        const childEmail = document.getElementById('child-email').value;
                        if (childEmail) {
                            // Find child user by email
                            const { data: childUser, error: childError } = await this.supabase
                                .from('user_profiles')
                                .select('id')
                                .eq('id', (await this.supabase.auth.admin.getUserByEmail(childEmail)).data?.user?.id)
                                .single();
                    
                            if (childUser) {
                                // Create parent-child relationship
                                const { error: linkError } = await this.supabase
                                    .from('parent_children')
                                    .insert({
                                        parent_id: authData.user.id,
                                        child_id: childUser.id,
                                        relationship: 'parent'
                                    });
                                
                                if (linkError) {
                                    console.error('Could not link parent to child:', linkError);
                                    // Don't fail registration, just log the error
                                }
                            } else {
                                console.log('Child account not found with that email');
                            }
                        }
                    }

                    if (profileError) throw profileError;

                    this.showAlert('Registration successful! Please check your email to verify your account.', 'success');
                    this.showLoginForm();

                } catch (error) {
                    console.error('Registration error:', error);
                    this.showAlert(error.message, 'error');
                } finally {
                    registerBtn.disabled = false;
                    registerBtn.textContent = 'Register';
                }
            }

            async loadUserProfile() {
                if (!this.currentUser) return;

                try {
                    const { data, error } = await this.supabase
                        .from('user_profiles')
                        .select('*')
                        .eq('id', this.currentUser.id)
                        .single();

                    if (error) throw error;
                    this.userProfile = data;
                } catch (error) {
                    console.error('Error loading user profile:', error);
                }
            }

            showDashboard() {
                document.getElementById('setup-section').classList.add('hidden');
                document.getElementById('login-section').classList.add('hidden');

                document.getElementById('setup-tab').style.display = 'none';
                document.getElementById('login-tab').style.display = 'none';
                document.getElementById('dashboard-tab').style.display = 'block';
                document.getElementById('games-tab').style.display = 'block';
                document.getElementById('progress-tab').style.display = 'block';
                document.getElementById('grades-tab').style.display = 'block';
                document.getElementById('logout-btn').classList.remove('hidden');

                if (this.userProfile) {
                    document.getElementById('welcome-message').textContent = 
                        'Welcome back, ' + this.userProfile.first_name + '!';
                    document.getElementById('student-name').textContent = 
                        this.userProfile.first_name + ' ' + this.userProfile.last_name;
                }

                this.showTab('dashboard');
            }

            showTab(tabName) {
                document.querySelectorAll('[id$="-section"]').forEach(section => {
                    section.classList.add('hidden');
                });
                
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                const section = document.getElementById(tabName + '-section');
                if (section) {
                    section.classList.remove('hidden');
                }
                
                const tab = document.getElementById(tabName + '-tab');
                if (tab) {
                    tab.classList.add('active');
                }
            }

            showAlert(message, type) {
                const alertsContainer = document.getElementById('auth-alerts');
                if (!alertsContainer) return;
                
                const alertDiv = document.createElement('div');
                alertDiv.className = 'alert alert-' + type;
                alertDiv.textContent = message;
                alertsContainer.innerHTML = '';
                alertsContainer.appendChild(alertDiv);
                
                setTimeout(() => {
                    if (alertDiv.parentNode) {
                        alertDiv.remove();
                    }
                }, 5000);
            }

            async logout() {
                try {
                    // Set a timeout for Supabase logout
                    const logoutPromise = this.supabase ? this.supabase.auth.signOut() : Promise.resolve();
                    const timeoutPromise = new Promise((resolve) => setTimeout(resolve, 3000)); // 3 second timeout
                    
                    await Promise.race([logoutPromise, timeoutPromise]);
                } catch (error) {
                    console.log('Logout error (continuing anyway):', error);
                }
                
                // Force logout regardless of Supabase response
                this.currentUser = null;
                this.userProfile = null;
                
                // Hide all sections EXCEPT login
                document.getElementById('setup-section').classList.add('hidden');
                document.getElementById('login-section').classList.remove('hidden');
                document.getElementById('dashboard-section').classList.add('hidden');
                document.getElementById('games-section').classList.add('hidden');
                document.getElementById('progress-section').classList.add('hidden');
                document.getElementById('grades-section').classList.add('hidden');
                
                // Show login tab, hide others
                document.getElementById('setup-tab').style.display = 'none';
                document.getElementById('login-tab').style.display = 'block';
                document.getElementById('dashboard-tab').style.display = 'none';
                document.getElementById('games-tab').style.display = 'none';
                document.getElementById('progress-tab').style.display = 'none';
                document.getElementById('grades-tab').style.display = 'none';
                document.getElementById('logout-btn').classList.add('hidden');
                
                // Set login tab as active
                document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
                document.getElementById('login-tab').classList.add('active');
                
                // Reset welcome message
                document.getElementById('welcome-message').textContent = 'Welcome to your learning dashboard';
                
                // Force show login section specifically
                this.showTab('login');
            }
        }

        function showTab(tabName) {
            portal.showTab(tabName);
        }

        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('register-form').classList.add('hidden');
        }

        function showRegisterForm() {
            document.getElementById('login-form').classList.add('hidden');
            document.getElementById('register-form').classList.remove('hidden');
        }

        function showLoginForm() {
            document.getElementById('login-form').classList.remove('hidden');
            document.getElementById('register-form').classList.add('hidden');
        }

        function playGame(gameId) {
            const gameTitle = {
                'math-adventure': 'üî¢ Math Adventure',
                'word-wizard': 'üìö Word Wizard',
                'science-lab': 'üß™ Science Lab',
                'history-quest': 'üèõÔ∏è History Quest'
            }[gameId];

            document.getElementById('current-game-title').textContent = gameTitle;
            document.getElementById('game-iframe-container').classList.remove('hidden');
            
            const iframe = document.getElementById('game-iframe');
            iframe.src = 'data:text/html,<html><body style="font-family: Arial; text-align: center; padding: 50px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;"><h1>' + gameTitle + '</h1><p>Game would load here!</p><p>This is where your HTML5 educational games would be embedded.</p></body></html>';
        }

        function closeGame() {
            document.getElementById('game-iframe-container').classList.add('hidden');
            document.getElementById('game-iframe').src = '';
        }

        const portal = new StudentPortal();
    </script>
</body>
</html>
